<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jstl/core">
<h:head>
	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>JSF Integrate Bootstrap</title>
	<h:outputStylesheet library="webjars"
		name="bootstrap/3.3.6/css/bootstrap.min-jsf.css" />
	<h:outputStylesheet library="webjars"
		name="bootstrap/3.3.6/css/bootstrap-theme.min-jsf.css" />
	<h:outputStylesheet library="webjars"
		name="font-awesome/4.5.0/css/font-awesome.min-jsf.css" />
	<h:outputScript library="webjars" name="jquery/2.1.4/jquery.min.js" />
	<h:outputScript library="webjars"
		name="bootstrap/3.3.6/js/bootstrap.min.js" />
	<h:outputStylesheet name="css/rj.css"></h:outputStylesheet>
	<h:outputScript name="js/bq.js"></h:outputScript>
</h:head>
<h:body>
	<div class="container-fluid">
		<div class="row">
			<nav class="navbar">
				<div class="container-fluid">
					<ul class="nav navbar-nav">
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown" id="upload-trigger"> <span
								class="glyphicon glyphicon-upload"></span>Upload File
						</a>
							<ul class="dropdown-menu">
								<li style="border-top: 1px solid rgba(0, 0, 0, 0.1);"><a
									href="#" id="xml-trigger">Xml File</a></li>
								<li><a href="#" id="zip-trigger">Zip File</a></li>
							</ul></li>
						<li><h:form>
								<h:commandLink action="#{downloadBean.download}">
									<span class="glyphicon glyphicon-download"></span>Download
                  </h:commandLink>
							</h:form></li>
						<li><h:form>
								<h:commandLink id="reset-data-trigger"
									action="#{modifyBean.resetdata}">
									<span class="glyphicon glyphicon-refresh"></span>Reset All
                  </h:commandLink>
							</h:form></li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="#"> <span
								class="glyphicon glyphicon-envelope"></span> Contact
						</a></li>
						<li><a href="#"><span
								class="glyphicon glyphicon-question-sign"></span> Help</a></li>
					</ul>
				</div>
			</nav>
		</div>
		<div class="row">
			<div class="col-lg-3" style="width: 25%;">
				<div>
					<input type="hidden" class="raw-data" value="#{treeBean.jsonTree}" />
					<ul class="nav">
						<ui:repeat var="table" value="#{treeBean.root.childs}"
							varStatus="tbStatus">
							<li class="tree-root nav-header"><label class="tree-toggle">#{table.tableName}</label>
								<ul class="nav">
									<ui:repeat var="col" value="#{table.childs}">
										<h:panelGroup
											rendered="#{col['class'].simpleName eq 'ColumnNode' || col['class'].simpleName eq 'PrimaryKeyNode'}">
											<li><a class="tree-node" href="#"
												contenteditable="false">#{col.columnName}</a></li>
										</h:panelGroup>

									</ui:repeat>
								</ul></li>
						</ui:repeat>
					</ul>
				</div>
			</div>
			<h:form id="main-tab">
				<div class="col-lg-9">
					<ul class="nav nav-tabs">
						<li class="active"><a data-toggle="tab" href="#dttable">Columns</a></li>
						<li><a data-toggle="tab" href="#dttabler">Foreign Keys</a></li>
					</ul>
					<div class="tab-content">
						<div id="dttable" class="tab-pane fade in active">
							<div class="row table-wrap"
								style="height: 250px; overflow-x: auto; overflow-y: scroll;">
								<table class="table table-striped table-bordered">
									<thead>
										<tr>
											<th class="col-md-2">Column</th>
											<th class="col-md-2">Type</th>
											<th class="col-md-2">NN</th>
											<th class="col-md-2">PK</th>
											<th class="col-md-2">FK</th>
											<th class="col-md-2">AI</th>
											<th class="col-md-2"></th>
										</tr>
									</thead>
									<tbody class="table-info">
									</tbody>
								</table>
							</div>
							<div class="row detail-wrap">
								<div class="heading">
									<h2 style="border-bottom: 5px solid #03a9f4;">Detail</h2>
								</div>
								<div>
									<h:form>
										<div class="col-md-6">
											<h:panelGroup styleClass="col-id-pane">
												<input type="hidden" />
											</h:panelGroup>
											<h:panelGroup styleClass="json-pane">
												<h:inputHidden value="#{treeBean.jsonTree}" />
											</h:panelGroup>
											<div class="form-group">
												<label for="usr">Name Column</label> <input type="text"
													class="col-name-detail form-control input-form" />
												<!-- <input type="text"
                            class="col-name-detail form-control" name="name" /> -->
											</div>
											<div class="form-group">
												<label for="sel1">Type Data</label> <select
													class="col-type-detail form-control input-form">
													<option value="VARCHAR">VARCHAR()</option>
													<option value="INTEGER">INTEGER</option>
													<option value="DOUBLE">DOUBLE</option>
													<option value="DATE">DATE</option>
													<option value="FLOAT">FLOAT</option>
												</select>
											</div>
											<div class="form-group">
												<label for="pwd">Length</label>
												<!-- <input type="text
                            class="col-length-detail form-control" name="length" /> -->
												<input type="text"
													class="col-length-detail form-control input-form" />
											</div>
										</div>
										<div class="col-md-6">
											<br></br> <br></br>
											<div class="row">
												<div class="form-group">
													<label style="width: 180px; text-align: right;" for="pwd1"
														class="col-sm-2">Not Null:</label>
													<div class="col-sm-2">
														<input type="checkbox" class="col-nn-detail" />
														<!-- <input type="checkbox" class="col-nn-detail" name="bNN" /> -->
													</div>
												</div>
											</div>
											<br></br>
											<div class="row">
												<div class="form-group">
													<label style="width: 180px; text-align: right;" for="pwd2"
														class="col-sm-2">Primary Key:</label>
													<div class="col-sm-2">
														<input type="checkbox" class="col-pk-detail" />
														<!-- <input type="checkbox" class="col-pk-detail" name="bPK" /> -->
													</div>
												</div>
											</div>
											<br></br>
											<div class="row">
												<div class="form-group">
													<label style="width: 180px; text-align: right;" for="pwd3"
														class="col-sm-2">Foreign Key:</label>
													<div class="col-sm-2">
														<input type="checkbox" class="col-fk-detail" />
														<!-- <input type="checkbox" class="col-fk-detail" name="bFK" /> -->
													</div>
												</div>
											</div>
											<br></br>
											<div class="row">
												<div class="form-group">
													<label style="width: 180px; text-align: right;" for="pwd4"
														class="col-sm-2">Auto Increment:</label>
													<div class="col-sm-2">
														<input type="checkbox" class="col-ai-detail" />
													</div>
												</div>
											</div>
											<div class="row" style="padding: 20px 0px 0px 0px;">
												<div>
													<h:commandButton style="width:100px;float:right;"
														styleClass="btn btn-info" value="Cancel"
														action="#{columnBean.restore(columnBean.column.tempId)}" />
												</div>
												<div style="padding-right: 120px">
													<!-- <input type="button" class="save-col btn btn-info" style="width:100px;float:right;" value="Save"/> -->
													<h:commandButton style="width:100px;float:right;"
														styleClass="save-col btn btn-info" value="Save"
														action="#{treeBean.save(treeBean.jsonTree)}" />
												</div>
											</div>
										</div>
									</h:form>
								</div>
							</div>
						</div>
						<div id="dttabler" class="tab-pane fade">
							<div class="row table-wrap"
								style="height: 250px; overflow-x: auto; overflow-y: scroll;">
								<table class="table table-striped table-bordered">
									<thead>
										<tr>
											<th class="col-md-2">Table</th>
											<th class="col-md-2">Column</th>
											<th class="col-md-2">Type</th>
											<th class="col-md-2">Refer Table</th>
											<th class="col-md-2">Refer Column</th>
										</tr>
									</thead>
									<tbody class="relation-info">
									</tbody>
								</table>
							</div>
							<div class="row detail-wrap">
								<div class="heading">
									<h2 style="border-bottom: 5px solid #03a9f4;">Detail</h2>
								</div>
								<div>
									<h:form>
										<div class="col-md-6">
											<div class="form-group">
												<label for="usr3">Table</label> <input type="text"
													class="rela-table-detail form-control" name="relaTable"
													readonly="readonly" />
											</div>
											<br></br>
											<div class="form-group">
												<label for="usr4">Column</label> <input type="text"
													class="rela-col-detail form-control" name="relaCol" />
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="usr1">Refer Table</label>
												<!-- <input type="text"
                            class="rela-rftable-detail form-control" name="relaRfTable" /> -->
												<select class="form-control" id="rela-rftable-detail">
												</select>
											</div>
											<br></br>
											<div class="form-group">
												<label for="usr2">Refer Column</label>
												<select class="form-control" id="rela-rfcol-detail">
												</select>
											</div>
											<div class="row" style="padding: 20px 0px 0px 0px;">
												<div>
													<h:commandButton style="width:100px;float:right;"
														styleClass="btn btn-info" value="Cancel"
														action="#{columnBean.restore(columnBean.column.tempId)}" />
												</div>
												<div style="padding-right: 120px">
													<!-- <input type="button" class="save-col btn btn-info" style="width:100px;float:right;" value="Save"/> -->
													<h:commandButton style="width:100px;float:right;"
														styleClass="save-col btn btn-info" value="Save"
														action="#{treeBean.save(treeBean.jsonTree)}" />
												</div>
											</div>
										</div>
									</h:form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</h:form>
		</div>
	</div>
	<div class="modal fade" id="xmlModal" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">
						<strong>Upload File</strong>
					</h4>
				</div>
				<div class="modal-body">
					<h4>Select file from your computer</h4>
					<h:form id="xml-form" enctype="multipart/form-data">
						<h:inputFile id="input-file" value="#{fileUploadBean.file}"
							validator="#{fileUploadBean.validateXmlFile}" />
						<h:message style="color:red" for="input-file" />
						<br></br>
						<h:commandButton value="Upload" action="#{fileUploadBean.upload}">
							<f:ajax execute="xml-form" render="xml-form" />
						</h:commandButton>
					</h:form>
					<h:panelGroup layout="block" id="xml-pane"
						rendered="#{fileUploadBean.validPass == 'true'}">
						<script type="text/javascript">
							$('#xmlModal').modal('hide');
						</script>
					</h:panelGroup>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="zipModal" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">
						<strong>Upload File</strong>
					</h4>
				</div>
				<div class="modal-body">
					<h4>Select file from your computer</h4>
					<h:form id="zip-form" enctype="multipart/form-data">
						<h:inputFile id="input-file" value="#{fileUploadBean.file}"
							validator="#{fileUploadBean.validateZipFile}" />
						<h:message style="color:red" for="input-file" />
						<br></br>
						<h:commandButton value="Upload" action="#{fileUploadBean.upload}">
							<f:ajax execute="zip-form" render="zip-form" />
						</h:commandButton>
					</h:form>
					<h:panelGroup layout="block" id="zip-pane"
						rendered="#{fileUploadBean.validPass == 'true'}">
						<script type="text/javascript">
							$('#zipModal').modal('hide');
						</script>
					</h:panelGroup>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="noticeModal" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">Modal Header</h4>
				</div>
				<div class="modal-body">
					<p>Some text in the modal.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
</h:body>
</html>
