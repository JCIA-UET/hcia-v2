<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
<h:head>

	<meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<title>JSF Integrate Bootstrap</title>

	<h:outputStylesheet library="webjars"
		name="bootstrap/3.3.6/css/bootstrap.min-jsf.css" />
	<h:outputStylesheet library="webjars"
		name="bootstrap/3.3.6/css/bootstrap-theme.min-jsf.css" />
	<h:outputStylesheet library="webjars"
		name="font-awesome/4.5.0/css/font-awesome.min-jsf.css" />
	<h:outputScript library="webjars" name="jquery/2.1.4/jquery.min.js" />
	<h:outputScript library="webjars"
		name="bootstrap/3.3.6/js/bootstrap.min.js" />
	<h:outputStylesheet name="css/lj.css"></h:outputStylesheet>
	<h:outputScript name="js/aq.js"></h:outputScript>

</h:head>
<h:body>
	<div class="container-fluid">
		<div class="row">
			<nav class="navbar">
				<div class="container-fluid">
					<ul class="nav navbar-nav">
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown"> <span
								class="glyphicon glyphicon-upload"></span>Upload File
						</a>
							<ul class="dropdown-menu">
								<li style="border-top: 1px solid rgba(0, 0, 0, 0.1);"><a
									href="#" id="xml-trigger">Xml File</a></li>
								<li><a href="#" id="zip-trigger">Zip File</a></li>
							</ul></li>
						<li><h:form>
								<h:commandLink action="#{downloadBean.download}">
									<span class="glyphicon glyphicon-download"></span>Download</h:commandLink>
							</h:form></li>
						<li><h:form>
								<h:commandLink id="reset-data-trigger"
									action="#{modifyBean.resetdata}">
									<span class="glyphicon glyphicon-refresh"></span>Reset All</h:commandLink>
							</h:form></li>
						<li><h:form>
								<h:commandLink id="reset-data-trigger"
									action="#{modifyBean.save}">
									<span class="glyphicon glyphicon-refresh"></span>Save</h:commandLink>
							</h:form></li>
					</ul>
					<ul class="nav navbar-nav navbar-right">
						<li><a href="#"> <span
								class="glyphicon glyphicon-envelope"></span> Contact
						</a></li>
						<li><a href="#"><span
								class="glyphicon glyphicon-question-sign"></span> Help</a></li>
					</ul>
				</div>
			</nav>
		</div>
		<div class="row">
			<div class="col-lg-3" style="width: 25%;">
				<div class="well">
					<ul class="nav">
						<ui:repeat var="table" value="#{treeBean.list}"
							varStatus="tbStatus">
							<li class="tree-root nav-header"><label class="tree-toggle">#{table.tableName}</label>
								<ul class="nav">
									<ui:repeat var="fkey" value="#{table.listRelationship}">
										<input type="hidden" class="rela-table"
											value="#{table.tableName}" />
										<input type="hidden" class="rela-col"
											value="#{fkey.referColumn}" />
										<input type="hidden" class="rela-type" value="#{fkey.type}" />
										<input type="hidden" class="rela-rftable"
											value="#{fkey.referTable}" />
										<input type="hidden" class="rela-rfcol"
											value="#{fkey.referColumn}" />
									</ui:repeat>
									<ui:repeat var="col" value="#{table.listColumn}"
										varStatus="colStatus">
										<input type="hidden" class="col-id" value="#{col.tempId}" />
										<input type="hidden" class="col-tableid"
											value="#{col.tableId}" />
										<input type="hidden" class="col-name" value="#{col.name}" />
										<input type="hidden" class="col-type" value="#{col.type}" />
										<input type="hidden" class="col-pk" value="#{col.primaryKey}" />
										<input type="hidden" class="col-ai"
											value="#{col.autoIncrement}" />
										<input type="hidden" class="col-nn" value="#{col.notNull}" />
										<input type="hidden" class="col-fk" value="#{col.foreignKey}" />
										<input type="hidden" class="col-length" value="#{col.length}" />
										<li><a class="tree-node" href="#" contenteditable="false">#{col.name}</a></li>
									</ui:repeat>
								</ul></li>
						</ui:repeat>
					</ul>
				</div>
			</div>
			<h:form id="main-tab">
				<div class="col-lg-9">
					<ul class="nav nav-tabs">
						<li class="active"><a data-toggle="tab" href="#dttable">Columns</a></li>
						<li><a data-toggle="tab" href="#dttabler">Foreign Keys</a></li>
					</ul>
					<div class="tab-content">
						<div id="dttable" class="tab-pane fade in active">
							<div class="row table-wrap"
								style="height: 250px; overflow-x: auto; overflow-y: scroll;">
								<table class="table table-striped table-bordered">
									<thead>
										<tr>
											<th class="col-md-2">Column</th>
											<th class="col-md-2">Type</th>
											<th class="col-md-2">NN</th>
											<th class="col-md-2">PK</th>
											<th class="col-md-2">FK</th>
											<th class="col-md-2">AI</th>
										</tr>
									</thead>
									<tbody class="table-info">
									</tbody>
								</table>
							</div>
							<div class="row detail-wrap">
								<div class="heading">
									<h2 style="border-bottom: 5px solid #03a9f4;">Detail</h2>
								</div>
								<div>
									<h:form>
										<div class="col-md-6">
											<h:panelGroup styleClass="col-id-pane">
												<h:inputHidden value="#{columnBean.column.tempId}" />
											</h:panelGroup>
											<h:panelGroup styleClass="col-tableid-pane">
												<h:inputHidden value="#{columnBean.column.tableId}" />
											</h:panelGroup>
											<div class="form-group">
												<label for="usr">Name Column</label>

												<h:inputText type="text"
													class="col-name-detail form-control"
													value="#{columnBean.column.name}" />
												<!-- <input type="text"
													class="col-name-detail form-control" name="name" /> -->
											</div>
											<div class="form-group">
												<label for="sel1">Type Data</label>
												<!-- <select
													class="col-type-detail form-control input-form" id="sel1">
													<option selected="selected">#{columnBean.column.type}</option>
													<option value="VARCHAR">VARCHAR()</option>
													<option value="INTEGER">INTEGER</option>
													<option value="DOUBLE">DOUBLE</option>
													<option value="DATE">DATE</option>
													<option value="FLOAT">FLOAT</option>
												</select> -->
												<h:selectOneMenu
													class="col-type-detail form-control input-form"
													value="#{columnBean.column.type}">
													<f:selectItem itemValue="VARCHAR" itemLabel="VARCHAR()" />
													<f:selectItem itemValue="INTEGER" itemLabel="INTEGER" />
													<f:selectItem itemValue="DOUBLE" itemLabel="DOUBLE" />
													<f:selectItem itemValue="DATE" itemLabel="DATE" />
													<f:selectItem itemValue="FLOAT" itemLabel="FLOAT" />
												</h:selectOneMenu>
											</div>
											<div class="form-group">
												<label for="pwd">Length</label>
												<!-- <input type="text"
													class="col-length-detail form-control" name="length" /> -->
												<h:inputText type="text"
													class="col-length-detail form-control input-from"
													value="#{columnBean.column.length}" />
											</div>
										</div>

										<div class="col-md-6">
											<br></br> <br></br>
											<div class="row">
												<div class="form-group">
													<label style="width: 180px; text-align: right;" for="pwd1"
														class="col-sm-2">Not Null:</label>
													<div class="col-sm-2">
														<h:selectBooleanCheckbox class="col-nn-detail"
															value="#{columnBean.column.notNull}" />
														<!-- <input type="checkbox" class="col-nn-detail" name="bNN" /> -->
													</div>
												</div>
											</div>
											<br></br>
											<div class="row">
												<div class="form-group">

													<label style="width: 180px; text-align: right;" for="pwd2"
														class="col-sm-2">Primary Key:</label>
													<div class="col-sm-2">
														<h:selectBooleanCheckbox class="col-pk-detail"
															value="#{columnBean.column.primaryKey}" />
														<!-- <input type="checkbox" class="col-pk-detail" name="bPK" /> -->
													</div>
												</div>
											</div>
											<br></br>
											<div class="row">
												<div class="form-group">

													<label style="width: 180px; text-align: right;" for="pwd3"
														class="col-sm-2">Foreign Key:</label>
													<div class="col-sm-2">
														<h:selectBooleanCheckbox class="col-fk-detail"
															value="#{columnBean.column.foreignKey}" />
														<!-- <input type="checkbox" class="col-fk-detail" name="bFK" /> -->
													</div>
												</div>
											</div>
											<br></br>
											<div class="row">
												<div class="form-group">
													<label style="width: 180px; text-align: right;" for="pwd4"
														class="col-sm-2">Auto Increament:</label>
													<div class="col-sm-2">
														<h:selectBooleanCheckbox class="col-ai-detail"
															value="#{columnBean.column.autoIncrement}" />
														<!-- <input type="checkbox" class="col-ai-detail" name="bAI" /> -->
													</div>
												</div>
											</div>
											<div class="row" style="padding: 20px 150px 0px 0px;">
												<h:commandButton style="width:100px;float:right;"
													styleClass="btn btn-info" value="Save"
													action="#{columnBean.save(columnBean.column)}" />
											</div>
										</div>
									</h:form>
								</div>
							</div>

						</div>
						<div id="dttabler" class="tab-pane fade">
							<div class="row table-wrap"
								style="height: 250px; overflow-x: auto; overflow-y: scroll;">
								<table class="table table-striped table-bordered">
									<thead>
										<tr>
											<th class="col-md-2">Table</th>
											<th class="col-md-2">Column</th>
											<th class="col-md-2">Type</th>
											<th class="col-md-2">Refer Table</th>
											<th class="col-md-2">Refer Column</th>
										</tr>
									</thead>
									<tbody class="relation-info">
									</tbody>
								</table>
							</div>
							<div class="row detail-wrap">
								<div class="heading">
									<h2 style="border-bottom: 5px solid #03a9f4;">Detail</h2>
								</div>
								<div>
									<h:form>
										<div class="col-md-6">
											<div class="form-group">
												<label for="usr3">Table</label> <input type="text"
													class="rela-table-detail form-control" name="relaTable"
													readonly="readonly" />
											</div>
											<br></br>
											<div class="form-group">
												<label for="usr4">Column</label> <input type="text"
													class="rela-col-detail form-control" name="relaCol" />
											</div>
										</div>
										<div class="col-md-6">
											<div class="form-group">
												<label for="usr1">Refer Table</label>
												<!-- <input type="text"
											class="rela-rftable-detail form-control" name="relaRfTable" /> -->
												<h:selectOneMenu class="rela-rftable-detail form-control"
													value="#{columnBean.column.type}">
													<ui:repeat var="table" value="#{tableBean.list}">
														<f:selectItem itemValue="#{table.tableName}"
															itemLabel="#{table.tableName}" />
													</ui:repeat>
												</h:selectOneMenu>
											</div>
											<br></br>
											<div class="form-group">
												<label for="usr2">Refer Column</label> <input type="text"
													class="rela-rfcol-detail form-control" name="relaRfCol" />
											</div>
										</div>
									</h:form>
								</div>
							</div>
						</div>
					</div>
				</div>
			</h:form>
		</div>
	</div>
	<div class="modal fade" id="xmlModal" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">
						<strong>Upload File</strong>
					</h4>
				</div>
				<div class="modal-body">
					<h4>Select file from your computer</h4>
					<h:form id="xml-form" enctype="multipart/form-data">
						<h:inputFile id="input-file" value="#{fileUploadBean.file}"
							validator="#{fileUploadBean.validateXmlFile}" />
						<h:message style="color:red" for="input-file" />
						<br></br>
						<h:commandButton value="Upload" action="#{fileUploadBean.upload}">
							<f:ajax execute="xml-form" render="xml-form" />
						</h:commandButton>
					</h:form>
					<h:panelGroup layout="block" id="xml-pane"
						rendered="#{fileUploadBean.validPass == 'true'}">
						<script type="text/javascript">
							$('#xmlModal').modal('hide');
						</script>
					</h:panelGroup>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="zipModal" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">
						<strong>Upload File</strong>
					</h4>
				</div>
				<div class="modal-body">
					<h4>Select file from your computer</h4>
					<h:form id="zip-form" enctype="multipart/form-data">
						<h:inputFile id="input-file" value="#{fileUploadBean.file}"
							validator="#{fileUploadBean.validateZipFile}" />
						<h:message style="color:red" for="input-file" />
						<br></br>
						<h:commandButton value="Upload" action="#{fileUploadBean.upload}">
							<f:ajax execute="zip-form" render="zip-form" />
						</h:commandButton>
					</h:form>
					<h:panelGroup layout="block" id="zip-pane"
						rendered="#{fileUploadBean.validPass == 'true'}">
						<script type="text/javascript">
							$('#zipModal').modal('hide');
						</script>
					</h:panelGroup>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="noticeModal" role="dialog">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h4 class="modal-title">Modal Header</h4>
				</div>
				<div class="modal-body">
					<p>Some text in the modal.</p>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
				</div>
			</div>
		</div>
	</div>
</h:body>
</html>